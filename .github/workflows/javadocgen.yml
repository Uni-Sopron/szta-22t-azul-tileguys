name: Javadoc Gen CI
on:
 push:
 branches: [ develop ]
jobs:
 build:
 runs-on: ubuntu-latest
 steps:
 # checkout myBranch
 - uses: actions/checkout@v2
 # generate the javadoc files
 - name: Set up JDK 11
 uses: actions/setup-java@v2
 with:
  java-version: '1'
  distribution: 'adopt'
 - name: Javadoc Action
  run: mvn site
# clean up the javadoc files including removing timestamps. OPTIONAL.
 - name: Tidy up the javadocs
 id: tidy
 uses: cicirello/javadoc-cleanup@v1
 with:
 path-to-root: doc/javadoc
 # store the doc files
 - name: Upload Output Directory
 uses: actions/upload-artifact@v2
 with:
 name: doc-files
 path: doc
 retention-days: 1
 copy:
 runs-on: ubuntu-latest
 needs: build
 steps:
 # checkout the gh-pages branch
 - uses: actions/checkout@v2
  with:
  ref: gh-pages
 # download the doc files, most of which are generated above
 - name: Download Output Directory
 uses: actions/download-artifact@v2
 with:
 name: doc-files
 path: docDir
 # add, commit and push to gh-pages
 - name: Commit changes
 uses: EndBug/add-and-commit@v7
 with:
 author_name: Tamás Würth
 author_email: wurtht@gain.uni-sopron.hu
 message: 'Update javadoc'
 branch: gh-pages
 add: '["docDir/javadoc/"]'